{% extends "base.html" %} 
{% block title %}{{ titulo }}{% endblock %}

{% block content %}
    <h2>{{ titulo }}</h2>

    <form method="POST" action="{{ url_for('paciente.salvar') }}">
        
        <input type="hidden" name="id_paciente" value="{{ paciente.id_paciente or '' }}">

        <div>
            <label for="nome">Nome Completo:</label>
            <input 
                type="text" 
                id="nome" 
                name="nome" 
                maxlength="150"
                value="{{ paciente.nome or '' }}"
                required> 
        </div>

        <div>
            <label for="cpf">CPF (11 dígitos):</label>
            <input 
                type="text" 
                id="cpf" 
                name="cpf" 
                maxlength="15" 
                pattern="\d{3}\.?\d{3}\.?\d{3}-?\d{2}"
                title="Formato: 000.000.000-00"
                value="{{ paciente.cpf or '' }}"
                required>
        </div>

        <div>
            <label for="data_nascimento">Data de Nascimento:</label>
            <input 
                type="date" 
                id="data_nascimento" 
                name="data_nascimento" 
                value="{{ paciente.data_nascimento or '' }}"
                required> 
        </div>
        
        <div>
            <label for="telefone">Telefone:</label>
            <input 
                type="tel" 
                id="telefone" 
                name="telefone" 
                maxlength="30"
                value="{{ paciente.telefone or '' }}"
                required>
        </div>

        <div>
            <label for="convenio_id">Convênio:</label>
            <select id="convenio_id" name="convenio_id" required>
                {% for convenio in convenios %}
                    <option 
                        value="{{ convenio.id_convenio }}"
                        {% if convenio.id_convenio == paciente.convenio_id %}selected{% endif %}>
                        {{ convenio.nome }}
                    </option>
                {% endfor %}
            </select>
        </div>
        
        <br>
        <button type="submit" class="btn-cadastrar" style="border: none; cursor: pointer;">Salvar Paciente</button>
        
        <a href="{{ url_for('paciente.listar') }}">Cancelar</a>
    </form>
{% endblock %}